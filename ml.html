<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Neva's Blog</title>
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
 
<script>
    function cal() {
      
    
        var ss = document.getElementById("samplesize").value;
        var incidence = document.getElementById("incidence").value;
        var ttt = Math.round(ss * (incidence/100));
        var sens = document.getElementById("sensitivity").value;
        var spec = document.getElementById("specificity").value;
        var ttf = Math.round(ss - ttt);
        var tp = Math.round(ttt * sens);
        var tn = Math.round(ttf * spec);
        document.getElementById("totalTtrue").innerHTML = ttt; 
        document.getElementById("totalTfalse").innerHTML = ttf;
        document.getElementById("TruePositive").innerHTML = tp; 
        document.getElementById("TrueNegative").innerHTML = tn; 
        document.getElementById("FalsePositive").innerHTML = ttf - tn; 
        document.getElementById("FalseNegative").innerHTML = ttt - tp; 
        document.getElementById("totalFfalse").innerHTML = tn + (ttt - tp); 
        document.getElementById("totalFtrue").innerHTML = tp + (ttf -tn); 
        var ppv = tp / (tp + (ttf-tn));
        var npv = tn / (tn + (ttt - tp));
        document.getElementById("PPV").innerHTML = ppv.toFixed(2);
        document.getElementById("NPV").innerHTML = npv.toFixed(2); 
        var acc = (tp + tn) / ss
        document.getElementById("acc").innerHTML = acc.toFixed(2); 
    }
</script> 

</head>
<body>
    
    
     <!---  <p id="output">Stuff on the side</p>--> 
     <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;">
        <!-- Navbar content -->
        <div class="container-fluid">
            <a class="navbar-brand" href="./index.html">Neva Bull</a>
            <button title="Navigation menu" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" >
            <span class="navbar-toggler-icon"></span>
            </button>
            
        <div class="collapse navbar-collapse"  id="navbarNav">
            <div class="navbar-nav">
        
                <a class="nav-link active" href="#">neuroscience</a>
                <a class="nav-link" href="#" aria-current="true">machine learning</a>
                <a class="nav-link" href="#">image processing</a>
        
            </div> 
        </div>   
        </div>
     
     </nav>
     
     <div class="row">
        <div class="col-sm-1"> <!----style="background-color: #e3ecf1;">-->
        </div>
        <div class="col-sm-1">

        </div>
        <div class="col-sm-8">

            <div class="container-fluid">
                <div class = "row">
                    <br/>
                    <br/>
                </div>     
<!--<input type="text" id="inp" value="10" onchange="calculate()"> -->

<h1 class="display-5">Machine Learning Concepts</h1>
<br/>
<p>
    Machine learning (ML) techiniques have become amazingly good in recent years and are changing the world while you read this. 
    The great news is that there are now freely available tools that let anyone with a little programming skill stand on the shoulders of the giants and dive right in.
        In this blog we will walk through a ML task using a great example of one of these tools, (<a href="https://dotnet.microsoft.com/en-us/apps/machinelearning-ai/ml-dotnet">ML.NET</a>).
    </p> 
    <p>The example we will use is: Predicting the winners of horse races!</p>

<h5>Step 1: Make a clear statement of your objectve. </h5>
<p>In our horse racing task our aim is to make a profit.</p>
<p>To make a profit we need to not bet on many loosers, at least not wager more on loosers than on winners.</p> 
<p>To put this more formally, and in a way that is testable we can phrase it like this: <em>The False Positive Rate on unseen examples must be lower than the average pay out for a winner.</em> </p>

<h5>Step 2: Plan how to evaluate the model</h5>
<p>
    This may seem backward, but before training a ML model it's a good idea to have a handle on how you are going to evaluate it. The <strong>confusion matrix</strong> is fundamental to understanding a model's performance. 
</p>
<p>
    The name <em>'confusion matrix'</em> is a good name, because it can be remarkably <em>confusing</em>. There are many ways to add, subtract and divide the cells in the table that give quite different measures of performance. 
    Unfortunately many of these measures have multiple names that mean the same thing. For example what is commonly expressed in medicine as <em>specificity</em> is also known as <em>selectivity</em> or <em>true negative rate</em>  
.  Check out <a href="https://en.wikipedia.org/wiki/Sensitivity_and_specificity">https://en.wikipedia.org/wiki/Sensitivity_and_specificity</a> for a basic list with formula.  
For a technical review see <a href = "https://www.sciencedirect.com/science/article/abs/pii/S0306457309000259">Sokolova and Lapalme (2009)</a>. Commonly only <em>accuracy</em> is reported, but this single number can be quite misleading.  
</p>
<p>
    One important thing to consider is which metric is most important to you.  All classifiers, including humans, make mistakes. In the real world, on unseen data, 100% accuracy is very unlikely. 
    Rather very high accuracy usually means there is a problem with the model such as overfitting. So consideration should be given to whether false positives or false negatives are least harmful. The choice is entirely dependant on the purpose of your task. 
 </p>
 <p>    
    For example, imagine you have tested positive for a rare form of cancer (occuring in 1 in 1000 people or 0.1% <em>incidence</em>) and you are told that this test is 99% accurate with 99% sensitivity and 99% specificity.
     What would you think the chance of the test being wrong and you <Strong>don't have the cancer</Strong> <em>(False Positive Rate)</em>?  
     <p>In this example the False Positive Rate is 91%! (1 - Positive Predictive Value)</p>
     <p>The confusion matrix below is prefilled with these numbers:  hit 'calculate' and see for yourself. 
     Try changing the incidence percentage and see the effect this has on Positive Predictive Value</p>
</p>






<h2 class="display-6">Interactive Confusion Matrix</h2>
<br/>

<table class="table table-borderless">
    <tbody>
        <tr>
            <td>Sample Size:</td>
            <td>Incidence (%):</td>
        </tr> 
        <tr>
        <td>  <input id="samplesize" value="1000" size="4" onchange="cal()" /></td>
            
            <td>  <input  id="incidence" value="0.1" size="4" onchange="cal()"/></td>
           </tr> 
           <tr>
            <td> Sensitivity:</td>
            <td>Specificity:</td>
        </tr>
            
            <tr>
           
        
            
                <td> <input id = "sensitivity" size="4" value="0.99" onchange="cal()"/> </td>
            
                <td> <input id ="specificity" size="4" value="0.99" onchange="cal()"/> </td>
            </tr>
                
        
    </tbody>
</table>
<td><button class="btn btn btn-outline-success" onclick="cal()">Calculate</button> </td>
<div class="row justify-content-center">
    <div class="col-2">
        <br/>
        
     
    </div>

</div>


<table class="table table-borderd">

    <tbody>
        <tr>
            <td></td>
            <td></td>
			<td><strong>PREDICTED</strong></td>

            <td></td>
        </tr>

        <tr>
            
			<td><strong>TRUTH</strong></td>
            <td>Positive</td>
            <td>Negative</td>
            <td>Total</td>
            
        </tr>
        <tr>
            
            <td>Positive</td>
            <td id="TruePositive" class="table-success"></td>
            <td id = "FalseNegative" class="table-danger"></td>
            <td id = "totalTtrue"></td>
        </tr>

        <tr>
            
            <td>Negative</td>
            <td id="FalsePositive" class="table-danger"></td>
            <td id="TrueNegative" class="table-success"></td>
            <td id ="totalTfalse"></td>
        </tr>
        <tr>
            <td>Total</td>
            
            <td id="totalFtrue"></td>
            <td id="totalFfalse"></td>
            <td></td>

        </tr>
        <tr>
            <td>Predictive Value</td>
           <td id="PPV"></td>
           <td id="NPV"></td>
           <td></td>     
        </tr>
        <tr>
            <td>Accuracy</td>
            <td id = "acc"></td>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table>
</div>
</div>
</div>

</body>

</div>
</div>
</div>
</body>
